<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Clases
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
 
    <ion-grid>
      <ion-row>
        <ion-col *ngIf="!showForm">
          <ion-item *ngFor="let class of classes">
            <ion-item-sliding>
              <ion-item class="ion-text-wrap">
                {{ class.student?.name }} {{ class.student?.surname }} - {{ (class.date_start | date: 'dd MMM yyyy HH:mm')}} - {{(class.date_end | date: 'HH:mm') }} ${{  class.price}}
              </ion-item>
              <ion-item-options>
                <ion-item-option color="warning" (click)="updateClass(class)">
                  <ion-icon name="create-outline" slot="icon-only"></ion-icon>
                </ion-item-option>
                <ion-item-option color="danger" (click)="deleteClassConfirm(class)">
                  <ion-icon name="trash-outline" slot="icon-only"></ion-icon>
                </ion-item-option>
              </ion-item-options>
              
            </ion-item-sliding>
          </ion-item>
        </ion-col>
        
        <ion-col *ngIf="showForm">
            <form (ngSubmit)="createUpdateClass()">
              <ion-item>
                <ion-label>Fecha de inicio</ion-label>
                <ion-datetime-button slot="end" displayFormat="DD MMM yyyy HH MM" datetime="date_start"></ion-datetime-button>
                <ion-modal [keepContentsMounted]="true">
                  <ng-template>
                    <ion-datetime id="date_start" [(ngModel)] = "objClass.date_start" name = "date_start"></ion-datetime>
                  </ng-template>
                </ion-modal>
              </ion-item>
              <ion-item>
                <ion-label>Fecha de fin</ion-label>
                <ion-datetime-button slot="end" displayFormat="DD MMM yyyy HH MM" datetime="date_end"></ion-datetime-button>
                <ion-modal [keepContentsMounted]="true">
                  <ng-template>
                    <ion-datetime id="date_end" [(ngModel)] = "objClass.date_end" name = "date_end"></ion-datetime>
                  </ng-template>
                </ion-modal>
              </ion-item>
              <ion-item>
                <ion-select label="Estudiante" name="student" [(ngModel)]="objClass.id_student">
                  <ion-select-option *ngFor="let student of students" [value]="student.id">
                    {{ student.name }} {{ student.surname}}
                  </ion-select-option>
                </ion-select>
              </ion-item>
              <ion-item>
                <ion-range min="0" max="100" [(ngModel)]="objClass.price" label="Precio" name="price"></ion-range>
                <ion-text>$ {{ objClass.price }}</ion-text>
              </ion-item>

              <ion-grid>
                <ion-row>
                  <ion-col>
                    <ion-button expand="block" tyoe="button" (click)="onCloseForm()">Volver</ion-button>
                  </ion-col>
                  <ion-col>
                    <ion-button expand="block" type="submit">{{ (update) ? 'Actualizar clase' : 'Agregar clase' }}</ion-button>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </form>
        </ion-col>
      </ion-row>
    </ion-grid>

    <ion-fab slot="fixed" vertical="bottom" horizontal="end" *ngIf="!showForm">
      <ion-fab-button (click)="onShowForm()" size="small">
        <ion-icon name="add"></ion-icon>
      </ion-fab-button>
    </ion-fab>
</ion-content>
